// invo.html

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Demo - Inventory Form</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body class="bg-light">

    <div class="container mt-4">

        <h2 class="text-center mb-4">Inventory Management</h2>

        <!-- Form Section -->
        <div class="card p-4 shadow-sm">

            <h5 id="formTitle">Add New Product</h5>

            <form id="inventoryForm" class="mt-3">

                <div class="row g-3">

                    <div class="col-md-3">
                        <label class="form-label">Item Name</label>
                        <input type="text" id="itemName" class="form-control" required>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label">Quantity</label>
                        <input type="number" id="quantity" class="form-control" required>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label">Price</label>
                        <input type="number" id="price" class="form-control" required>
                    </div>

                    <div class="col-md-3">
                        <label class="form-label">Year of Manufacture</label>
                        <input type="number" id="year" class="form-control" required>
                    </div>

                </div>

                <div class="mt-3 d-flex gap-2">
                    <button type="button" id="addBtn" class="btn btn-primary">Add</button>
                    <button type="reset" id="resetBtn" class="btn btn-secondary">Reset</button>
                </div>

            </form>

        </div>

        <!-- Table Section -->
        <div class="card p-4 mt-4 shadow-sm">

            <h5>Product List</h5>

            <table class="table table-bordered text-center mt-3">
                <thead class="table-dark">
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Year</th>
                        <th>Edit</th>
                        <th>Remove</th>
                    </tr>
                </thead>

                <tbody id="productTable"></tbody>
            </table>

        </div>

    </div>

    <!-- JavaScript -->
    <script>
        let currentEditRow = null; // track row being edited

        // ADD / UPDATE button
        document.getElementById("addBtn").addEventListener("click", function () {

            let item = document.getElementById("itemName").value;
            let qty = document.getElementById("quantity").value;
            let price = document.getElementById("price").value;
            let year = document.getElementById("year").value;

            // If editing existing row
            if (currentEditRow) {
                currentEditRow.children[0].textContent = item;
                currentEditRow.children[1].textContent = qty;
                currentEditRow.children[2].textContent = price;
                currentEditRow.children[3].textContent = year;

                // Reset form and button
                currentEditRow = null;
                document.getElementById("addBtn").textContent = "Add";
                document.getElementById("formTitle").textContent = "Add New Product";
                document.getElementById("inventoryForm").reset();
                return;
            }

            // Create new table row
            let table = document.getElementById("productTable");
            let row = document.createElement("tr");

            row.innerHTML = `
                <td>${item}</td>
                <td>${qty}</td>
                <td>${price}</td>
                <td>${year}</td>
                <td><button class="btn btn-warning btn-sm edit-btn">Edit</button></td>
                <td><button class="btn btn-danger btn-sm remove-btn">Remove</button></td>
            `;

            table.appendChild(row);

            document.getElementById("inventoryForm").reset();
        });

        // TABLE BUTTON HANDLING
        document.getElementById("productTable").addEventListener("click", function (e) {

            // REMOVE
            if (e.target.classList.contains("remove-btn")) {
                let row = e.target.parentElement.parentElement;
                row.remove();
            }

            // EDIT
            if (e.target.classList.contains("edit-btn")) {
                let row = e.target.parentElement.parentElement;
                currentEditRow = row;

                // Fill form fields
                document.getElementById("itemName").value = row.children[0].textContent;
                document.getElementById("quantity").value = row.children[1].textContent;
                document.getElementById("price").value = row.children[2].textContent;
                document.getElementById("year").value = row.children[3].textContent;

                // Change button to Update
                document.getElementById("addBtn").textContent = "Update";
                document.getElementById("formTitle").textContent = "Edit Product";
            }
        });
    </script>

</body>

</html>
